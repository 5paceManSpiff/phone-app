<ion-view title="People">
  <ion-nav-buttons side="right">
    <button class="button button-clear" ng-click="showFilter()">
      Filter
    </button>
  </ion-nav-buttons>

  <div class="bar bar-subheader item-input-inset">
    <label class="item-input-wrapper">
      <i class="icon ion-ios7-search placeholder-icon"></i>
      <input id="searchKey" type="search" placeholder="Search" ng-model="searchKey" autocorrect="off">
    </label>
    <button class="button button-clear" ng-click="search()">Search</button>
  </div>

  <ion-content class="has-header has-subheader">
    <ion-refresher
      pulling-text="Pull to refresh..."
      on-refresh="refresh()">
    </ion-refresher>
    <ion-list>
      <div class="card" ng-repeat="item in items">
        <a ng-click="showUser(item.id)" class="user-info item row button button-outline button-light">
          <div class="user-inner">
            <div class="crop user-crop" ng-style="{'background-image': 'url(' + (item.imagePath | staticurl) + ')'}"></div>
            <div class="user-data">
              <h2>{{item.firstName}} {{item.lastName}}</h2>
              <h2>{{item.creationDate | date | member}}</h2>
            </div>
          </div>
        </a>

        <div ng-show="loggedIn" class="go item row">
          <button class="button button-light col col-50" ng-click="followUser(item)">
            <span ng-bind-html="(item.isFollowing ? 'Following' : 'Follow')"></span>
          </button>
          <button class="button button-light col col-50" ng-hide="inRoster(item.id)" ng-click="addToChat(item.id)">
            Add to chat
          </button>
          <button class="button button-light col col-50" ng-show="inRoster(item.id)" ng-click="message(item)">
            Message
          </button>
        </div>
      </div>
    </ion-list>
    <ion-infinite-scroll
      ng-if="canLoadMore()"
      on-infinite="loadMore()"
      icon="ion-loading-c"
      distance="2%">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>
